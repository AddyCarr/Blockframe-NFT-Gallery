import Head from 'next/head'

import { useGetNfts } from '@/hooks/useGetNfts'
import { Header } from '@/components/Header/Header'
import { MasonryLayout } from '@/components/MasonryLayout/MasonryLayout'
import { useDropdown } from '../hooks/useDropdown'
import { ContainerCard } from '@/components/ContainerCard/ContainerCard'
import { Dropdown } from '@/components/Elements/Dropdown/Dropdown'
import Button from '@/components/Elements/Button/Button'
import styles from '../styles/App.module.css'

export default function Home() {
    const [isLoading, data, onGetByAddress] = useGetNfts()
    const [dropdownItems, selectedItem, onUpdateSelection] = useDropdown()

    return (
        <>
            <Head>
                <title>Encode Bootcamp Final Project</title>
                <meta
                    name='description'
                    content='Generated by create next app'
                />
                <meta
                    name='viewport'
                    content='width=device-width, initial-scale=1'
                />
                <link rel='icon' href='/favicon.ico' />
            </Head>

            <main>
                <Header onSearch={onGetByAddress} isSearchLoading={isLoading} />
                <div
                    className='flex justify-content-center'
                    style={{ marginTop: '50px', padding: '50px' }}
                >
                    <ContainerCard>
                        <div
                            className={`${styles['gallery-setting']} flex justify-content-between align-items-center`}
                        >
                            <h1 id='masonry-title'>All images</h1>
                            <Dropdown
                                selectedItem={selectedItem}
                                onSelect={onUpdateSelection}
                                items={dropdownItems}
                            />
                        </div>
                        {data && (
                            <MasonryLayout
                                isLoading={isLoading}
                                images={data.result}
                            />
                        )}
                    </ContainerCard>
                </div>
            </main>
        </>
    )
}
